<!DOCTYPE html>
<html>
<head>
    <title>Valentine Mini Game üíò</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family:Arial,sans-serif;}
        body {
            height:100vh;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            background: linear-gradient(135deg,#ff9a9e,#fad0c4);
            text-align:center;
            overflow:hidden;
        }
        #gameArea {
            position: relative;
            width: 90vw;
            height: 60vh;
            margin-top:20px;
        }
        #heart {
            position:absolute;
            width:150px;
            height:160px;
            cursor:pointer;
            transition: all 0.1s ease;
        }

        /* Win screen styling */
        #winScreen {
            position: fixed;
            top:50%;
            left:50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.4);
            display:flex;
            justify-content:center;
            align-items:center;
            flex-direction:column;
            color:white;
            text-align:center;
            z-index:20;
            padding: 20px;
            border-radius: 20px;
            max-width: 90%;
        }

        #winScreen h1 {
            font-size:2em;
            margin-bottom:30px;
            animation: pulse 1s infinite;
        }

        .winButton {
            padding: 15px 30px;
            font-size:1.5em;
            margin:10px;
            border:none;
            border-radius:25px;
            cursor:pointer;
            transition: transform 0.2s, background 0.2s;
        }
        #yesBtn { background:#ff69b4; color:white; }
        #yesBtn:hover { background:#ff85c1; }
        #noBtn { background:#ff1493; color:white; }
        #noBtn:hover { background:#ff4da6; }

        @keyframes pulse {
            0%,100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        #valentineWrapper {
            display:none;
            position: fixed;
            top:35%;  /* slightly upper for texts above image */
            left:50%;
            transform: translate(-50%, -50%);
            color:#fff;
            text-align:center;
            z-index:35;
        }
        #valentineText { font-size:2.5em; text-shadow:2px 2px 8px #000; animation: pulse 1s infinite; }
        #valentineText2 { font-size:2em; margin-top:10px; text-shadow:2px 2px 8px #000; animation: pulse 2s infinite; }

        #valentineImg {
            display:none;
            width:450px;
            height:auto;
            border-radius:15px;
            position:fixed;
            top:55%;  /* slightly below texts */
            left:50%;
            transform: translate(-50%, -50%);
            z-index:30;
        }

        .floating-img {
            position:absolute;
            width:250px;
            height:250px;
            object-fit:cover;
            pointer-events:none;
            border-radius:15px;
            z-index:25;
        }

        .confetti {
            position:absolute;
            font-size:20px;
            user-select:none;
            pointer-events:none;
            z-index:40;
            opacity:0;
            transition: opacity 0.5s ease;
        }
    </style>
</head>
<body>

<h1 id="gameTitle">Oh nooo tobi escaped! Catch Tobi and win a prize! üê∂</h1>
<p id="gameDesc">Click him until he‚Äôs caught üòè</p>

<div id="gameArea">
    <img id="heart" src="dog.png" alt="Tobi"/>
</div>

<div id="winScreen" style="display:none;">
    <h1>Congratulations! You‚Äôve won the chance to be my Valentine‚Äîwill you accept? üíò</h1>
    <div>
        <button id="yesBtn" class="winButton">Yes</button>
        <button id="noBtn" class="winButton">No</button>
    </div>
</div>

<div id="valentineWrapper">
    <div id="valentineText">Thank you my Beloved Queen Athena! üëë</div>
    <div id="valentineText2">HAPPY VALENTINES ATHENA! ‚ù§Ô∏è</div>
</div>

<img id="valentineImg" src="valentine.png" alt="Valentine"/>

<script>
const heart = document.getElementById("heart");
const gameArea = document.getElementById("gameArea");
const winScreen = document.getElementById("winScreen");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const valentineImg = document.getElementById("valentineImg");
const valentineWrapper = document.getElementById("valentineWrapper");
const valentineText = document.getElementById("valentineText");
const valentineText2 = document.getElementById("valentineText2");
const gameTitle = document.getElementById("gameTitle");
const gameDesc = document.getElementById("gameDesc");

let clickCount = 0;
let noClickStep = 0;
const noTexts = ["pleaseee","yes na pooo","pretty pleaseee","pWEaseee", "Sige na po bunnn :("];

function moveHeart() {
    const areaWidth = gameArea.clientWidth - 150;
    const areaHeight = gameArea.clientHeight - 160;
    const x = Math.random() * areaWidth;
    const y = Math.random() * areaHeight;
    heart.style.left = x + "px";
    heart.style.top = y + "px";
}
setInterval(moveHeart, 1000);

function shakeDog() {
    let angle = 0;
    let shakes = 0;
    const maxShakes = 10;
    const shakeInterval = setInterval(() => {
        angle = (angle === 5 ? -5 : 5);
        heart.style.transform = `rotate(${angle}deg)`;
        shakes++;
        if(shakes > maxShakes) {
            heart.style.transform = `rotate(0deg)`;
            clearInterval(shakeInterval);
        }
    }, 30);
}

heart.addEventListener("click", () => {
    clickCount++;
    if(clickCount < 4) { shakeDog(); return; }
    winScreen.style.display = "flex";
    heart.style.display = "none";
});

function restartGame() {
    clickCount = 0;
    noClickStep = 0;
    yesBtn.style.transform="scale(1)";
    noBtn.style.transform="scale(1)";
    noBtn.textContent="No";
    winScreen.style.display="none";
    valentineImg.style.display="none";
    valentineWrapper.style.display="none";
    document.querySelectorAll(".floating-img, .confetti").forEach(el=>el.remove());
    heart.style.display="block";
    gameTitle.style.display="block";
    gameDesc.style.display="block";
    moveHeart();
}

noBtn.addEventListener("click", () => {
    noClickStep++;
    const textIndex = noClickStep % noTexts.length;
    noBtn.textContent = noTexts[textIndex];
    let currentScale = parseFloat(noBtn.style.transform.replace("scale(","").replace(")","")) || 1;
    currentScale *= 0.9;
    noBtn.style.transform = `scale(${currentScale})`;
    let yesScale = parseFloat(yesBtn.style.transform.replace("scale(","").replace(")","")) || 1;
    yesScale *= 1.1;
    yesBtn.style.transform = `scale(${yesScale})`;
});

yesBtn.addEventListener("click", () => {
    winScreen.style.display="none";
    gameTitle.style.display="none";
    gameDesc.style.display="none";
    heart.style.display="none";

    valentineWrapper.style.display="block";
    valentineText.classList.add("zooming");
    valentineText2.classList.add("pulse");

    valentineImg.style.display="block";
    valentineImg.style.width="450px";
    valentineImg.style.height="auto";

    rapidShake(valentineImg);
    spawnFloatingImages();
    startConfetti(80);
});

function rapidShake(img){
    let angle = 5;
    setInterval(()=>{
        img.style.transform = `translate(-50%, -50%) rotate(${angle}deg)`;
        angle = -angle;
    }, 50);
}

// Floating images (10 copies of "us")
function spawnFloatingImages(){
    for(let i=0;i<10;i++){
        const img = document.createElement("img");
        img.src="us_transparent.png";
        img.className="floating-img";
        document.body.appendChild(img);

        let posX=Math.random()*(window.innerWidth-250);
        let posY=Math.random()*(window.innerHeight-250);
        img.style.left=posX+"px";
        img.style.top=posY+"px";

        let dx=(Math.random()-0.5)*4;
        let dy=(Math.random()-0.5)*4;
        let rot=Math.random()*360;
        let drot=(Math.random()-0.5)*2;

        function animate(){
            posX+=dx;
            posY+=dy;
            rot+=drot;
            if(posX<0||posX>window.innerWidth-250) dx*=-1;
            if(posY<0||posY>window.innerHeight-250) dy*=-1;
            img.style.left=posX+"px";
            img.style.top=posY+"px";
            img.style.transform=`rotate(${rot}deg)`;
            requestAnimationFrame(animate);
        }
        animate();
    }
}

// Optimized confetti
function startConfetti(amount){
    const symbols=["üíñ","üíò","üå∏","üå∫","üåº"];
    const confettis=[];
    const screenWidth=window.innerWidth;
    const screenHeight=window.innerHeight;
    for(let i=0;i<amount;i++){
        const c=document.createElement("div");
        c.className="confetti";
        c.textContent=symbols[Math.floor(Math.random()*symbols.length)];
        document.body.appendChild(c);
        c.x=Math.random()*screenWidth;
        c.y=-Math.random()*screenHeight;
        c.dy=3+Math.random()*2;
        c.dx=(Math.random()-0.5)*1;
        c.dRot=(Math.random()-0.5)*3;
        c.rotation=Math.random()*360;
        confettis.push(c);
        setTimeout(()=>{c.style.opacity=1;}, Math.random()*500);
    }
    function animate(){
        for(const c of confettis){
            c.y+=c.dy;
            c.x+=c.dx;
            c.rotation+=c.dRot;
            if(c.y>screenHeight+20) c.y=-20;
            c.style.top=c.y+"px";
            c.style.left=c.x+"px";
            c.style.transform=`rotate(${c.rotation}deg)`;
        }
        requestAnimationFrame(animate);
    }
    animate();
}

moveHeart();
</script>

</body>
</html>
